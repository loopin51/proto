# Agent Interaction Project

## 개요
이 프로젝트는 대화형 에이전트 시스템의 기억 관리와 회상 기능을 강화하기 위해 설계되었습니다. 논문에서 제안된 장단기 기억 구조를 바탕으로, 에이전트가 이전 대화를 기반으로 적응형 회상을 생성하고, 이를 대화에 활용할 수 있도록 구현하였습니다. 이 README는 프로젝트의 주요 기능, 구조, 및 구현 원리를 간략히 설명합니다.

## 주요 기능

### 1. 대화 관리
- **기능**: 두 에이전트 간의 대화를 주고받으며, 각 대화 내용을 데이터베이스에 저장합니다.
- **구현 원리**:
  - `agent_conversation` 함수가 대화 흐름을 처리합니다.
  - 대화 내용은 SQLite 데이터베이스의 `conversations` 테이블에 저장됩니다.

### 2. 장기 및 단기 기억 관리
- **기능**: 대화 중 생성된 기억을 단기 기억으로 저장하고, 중요도 평가를 통해 장기 기억으로 승격합니다.
- **구현 원리**:
  - 단기 기억은 최대 10개의 항목을 유지하며, 초과 시 오래된 기억을 삭제합니다.
  - 장기 기억은 중요도가 높은 항목만 저장하며, 마지막 접근 시각을 기록합니다.
  - 중요도는 문맥, 최신성, 빈도, 감정 분석 결과를 종합하여 계산됩니다.
  - SQLite 데이터베이스에 `short_term_memory` 및 `long_term_memory` 테이블을 사용합니다.

### 3. 회상 생성
- **기능**: 단기 및 장기 기억을 기반으로 적절한 회상 내용을 생성합니다.
- **구현 원리**:
  - `generate_reflection` 함수가 기억의 중요도와 최신성을 고려하여 회상 내용을 구성합니다.
  - 회상 내용은 대화의 문맥에 맞춰 에이전트 응답에 포함됩니다.

### 4. 자동화된 기억 관리
- **기능**: 기억 관리 및 회상 생성 과정을 자동으로 실행합니다.
- **구현 원리**:
  - `manage_memory` 함수가 주기적으로 실행되어 단기 기억을 정리하고, 중요도를 평가해 장기 기억으로 승격합니다.
  - 회상 생성은 `generate_reflection`을 호출하여 동적으로 수행됩니다.

### 5. 중요도 평가 알고리즘
- **기능**: 기억 항목의 중요도를 다차원적으로 평가하여, 관리 우선순위를 결정합니다.
- **구현 원리**:
  - 중요도는 문맥 적합성, 최신성, 빈도, 감정 점수의 가중 평균으로 계산됩니다.
  - 감정 점수는 `TextBlob`을 활용해 감정 분석 결과를 기반으로 합니다.

## 프로젝트 디렉토리 구조
```
agent_interaction_project/
|-- app.py
|-- agents/
|   |-- agent.py
|-- utils/
|   |-- agent_methods.py
|   |-- llm_connector.py
|-- database/
|-- templates/
|   |-- index.html
|   |-- reflection.html
|   |-- memory.html
|-- static/
|   |-- style.css
|-- tests/
|   |-- test_conversation.py
|   |-- test_memory.py
|   |-- test_endpoints.py
|-- README.md
```

## 데이터베이스 구조

### `conversations` 테이블
- `id`: 고유 식별자
- `turn`: 대화 순서
- `speaker`: 발화자
- `message`: 대화 내용

### `short_term_memory` 테이블
- `id`: 고유 식별자
- `timestamp`: 생성 시각
- `content`: 기억 내용
- `importance`: 중요도 점수

### `long_term_memory` 테이블
- `id`: 고유 식별자
- `content`: 기억 내용
- `importance`: 중요도 점수
- `last_accessed`: 마지막 접근 시각

## 구현 원리

### 기억 저장
- 대화 중 생성된 기억은 `add_to_short_term_memory` 함수를 통해 단기 기억으로 저장됩니다.
- 단기 기억 항목은 중요도 평가 후 `promote_to_long_term_memory`를 통해 장기 기억으로 이동합니다.

### 회상 생성
- `generate_reflection` 함수는 단기 및 장기 기억에서 최신성과 중요도가 높은 항목을 조합하여 회상 내용을 생성합니다.

### 중요도 평가
- `calculate_importance` 함수는 다음 요소를 기반으로 점수를 계산합니다:
  - **문맥 적합성**: 현재 대화와의 연관성.
  - **최신성**: 기억 생성 시각과 현재 시각 간의 차이.
  - **빈도**: 기억이 참조된 횟수.
  - **감정 점수**: `TextBlob`을 활용한 감정 분석 결과.

## 향후 개선 사항
- 기억 클러스터링 및 의미 기반 검색 기능 추가.
- 에이전트 간의 상호작용 다양화를 위한 동적 성격 프로파일링.
- 중요도 평가 알고리즘의 머신러닝 기반 개선.

## 실행 방법
1. 프로젝트 의존성을 설치합니다:
   ```bash
   pip install -r requirements.txt
   ```
2. Flask 서버를 실행합니다:
   ```bash
   python app.py
   ```
3. 웹 브라우저에서 `http://127.0.0.1:5000`으로 접속합니다.

